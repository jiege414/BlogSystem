# 手动测试记录 - 博客系统

## 测试轮次：1（P0用例）
日期：2025.12.25
测试员：宋传杰

### 执行摘要
- 总用例数：9
- 通过：9
- 失败：0
- 阻塞：0

### 详细记录

#### TC-AUTH-001: 用户注册 - 正常流程
- 状态：通过
- 测试数据：用户名 `test01`，邮箱 `test01@example.com`
- 实际结果：与预期结果一致（见 TESTCASES.md 第23-27行）
- 测试截图：`screenshots/TC-AUTH-001-PASS.png`
- 测试结论：功能正常，符合预期


#### TC-AUTH-008: 用户登录 - 正常流程
- 状态：通过
- 测试数据：用户名 `testuser`，密码 `123456`
- 实际结果：与预期结果一致（见 TESTCASES.md 第139-143行）
- 测试截图：`screenshots/TC-AUTH-008-PASS.png`
- 测试结论：功能正常，符合预期

#### TC-AUTH-012: 用户登出
- 状态：通过
- 测试数据：无
- 实际结果：与预期结果一致（见 TESTCASES.md 第195-199行）
- 测试截图：`screenshots/TC-AUTH-012-PASS.png`
- 测试结论：功能正常，符合预期

#### TC-POST-001: 创建文章 - 正常流程
- 状态：通过
- 测试数据：已登录用户 testuser，标题：正常标题，内容：正常文章内容
- 实际结果：与预期结果一致（见 TESTCASES.md 第227-231行）
- 测试截图：`screenshots/TC-POST-001-PASS.png`
- 测试结论：功能正常，符合预期

#### TC-POST-005: 查看文章列表
- 状态：通过
- 测试数据：无
- 实际结果：与预期结果一致（见 TESTCASES.md 第284-288行）
- 测试截图：`screenshots/TC-POST-005-PASS.png`
- 测试结论：功能正常，符合预期

#### TC-POST-006: 查看文章详情
- 状态：通过
- 测试数据：无
- 实际结果：与预期结果一致（见 TESTCASES.md 第299-303行）
- 测试截图：`screenshots/TC-POST-006-PASS.png`
- 测试结论：功能正常，符合预期

#### TC-POST-008: 编辑文章 - 正常流程（作者）
- 状态：通过
- 测试数据：已登录用户 testuser，已有文章一篇（ID=1），修改后的标题/内容为正常文本
- 实际结果：与预期结果一致（见 TESTCASES.md 第327-332行）
- 测试截图：`screenshots/TC-POST-008-PASS.png`
- 测试结论：功能正常，符合预期

#### TC-POST-012: 删除文章 - 正常流程（作者）
- 状态：通过
- 测试数据：已登录用户 testuser，自己名下文章一篇（ID=1）
- 实际结果：与预期结果一致（见 TESTCASES.md 第384-390行）
- 测试截图：`screenshots/TC-POST-012-PASS.png`
- 测试结论：功能正常，符合预期

#### TC-PERM-001: 文章编辑权限 - 仅作者可见编辑按钮
- 状态：通过
- 测试数据：用户A：testuser（文章作者），用户B：otheruser（非作者）
- 实际结果：与预期结果一致（见 TESTCASES.md 第481-484行）
- 测试截图：`screenshots/TC-PERM-001-PASS.png`
- 测试结论：功能正常，符合预期

## 测试轮次：2（P1用例）
日期：2025.12.26
测试员：宋传杰

### 执行摘要
- 总用例数：32
- 通过：30
- 失败：2
- 阻塞：0

### 详细记录

#### TC-AUTH-002: 用户注册 - 用户名已存在
- 状态：通过
- 测试数据：用户名 `test01`
- 实际结果：与预期结果一致（见 TESTCASES.md 第40-43行）
- 测试截图：`screenshots/TC-AUTH-002-PASS.png`
- 测试结论：功能正常，符合预期

#### TC-AUTH-003: 用户注册 - 邮箱已注册
- 状态：通过
- 测试数据：邮箱 `test01@example.com`
- 实际结果：与预期结果一致（见 TESTCASES.md 第56-58行）
- 测试截图：`screenshots/TC-AUTH-003-PASS.png`
- 测试结论：功能正常，符合预期

#### TC-AUTH-004: 用户注册 - 用户名长度验证
- 状态：通过
- 测试数据：用户名长度 < 4 字符（如"abc"），尝试输入 > 64 字符
- 实际结果：与预期结果一致（见 TESTCASES.md 第70-72行、第78-80行）
- 测试截图：`screenshots/TC-AUTH-004(1)-PASS.png`、`screenshots/TC-AUTH-004(2)-PASS.png`
- 测试结论：功能正常，符合预期

#### TC-AUTH-005: 用户注册 - 密码长度验证
- 状态：通过
- 测试数据：用户密码 ` 12345 `
- 实际结果：与预期结果一致（见 TESTCASES.md 第96-98行）
- 测试结论：功能正常，符合预期

#### TC-AUTH-006: 用户注册 - 密码确认不一致
- 状态：通过
- 测试数据：密码 `123456`，确认密码 `654321`
- 实际结果：与预期结果一致（见 TESTCASES.md 第110-112行）
- 测试结论：功能正常，符合预期

#### TC-AUTH-007: 用户注册 - 邮箱格式验证
- 状态：通过
- 测试数据：邮箱 `invalid-email`
- 实际结果：与预期结果一致（见 TESTCASES.md 第124-126行）
- 测试结论：功能正常，符合预期

#### TC-AUTH-009: 用户登录 - 用户名或密码错误
- 状态：
- 测试数据：用户名 `test01 `  ，用户密码 ` test01`
- 实际结果：与预期结果一致（见 TESTCASES.md 第155-158行）
- 测试结论：功能正常，符合预期

#### TC-AUTH-010: 用户登录 - 使用邮箱登录
- 状态：通过
- 测试数据：邮箱 `test@example.com`
- 实际结果：与预期结果一致（见 TESTCASES.md 第171-173行）
- 测试结论：功能正常，符合预期

#### TC-AUTH-013: 未登录用户访问受保护页面
- 状态：通过
- 测试数据：
 测试账户：未登录（浏览器无会话/清空Cookie）
 受保护URL1：/blog/create
 受保护URL2：/blog/post/3/edit
- 实际结果：与预期结果一致（见 TESTCASES.md 第209-212行）
- 测试结论：功能正常，符合预期

#### TC-POST-002: 创建文章 - 标题为空
- 状态：通过
- 测试数据：用户名 `testuser`（已登录），文章标题：留空，文章内容：`这是一篇测试文章的内容`
- 实际结果：与预期结果一致（见 TESTCASES.md 第244-246行）
- 测试结论：功能正常，符合预期

#### TC-POST-003: 创建文章 - 标题超长
- 状态：通过
- 测试数据：用户名 `testuser`（已登录），文章标题：（一段大于200字符长度的文本），文章内容：`这是一篇测试文章的内容`
- 实际结果：输入到200字符后文本框不再接受更多字符，无法提交超长标题。
  备注：未直接验证后端长度校验。
- 测试结论：功能正常，满足防止超长标题提交的需求（当前通过前端长度限制实现，未直接验证后端长度校验）

#### TC-POST-004: 创建文章 - 内容为空
- 状态：通过
- 测试数据：用户名 `testuser`（已登录），文章标题：`这是测试文章的标题 `，文章内容：留空
- 实际结果：与预期结果一致（见 TESTCASES.md 第272-274行）
- 测试结论：功能正常，符合预期

#### TC-POST-007: 查看文章详情 - 文章不存在
- 状态：通过
- 测试数据：文章ID `99999`
- 实际结果：与预期结果一致（见 TESTCASES.md 第312-314行）
- 测试结论：功能正常，符合预期

#### TC-POST-009: 编辑文章 - 非作者尝试编辑
- 状态：通过
- 测试数据：用户A：testuser（文章作者），用户B：otheruser（非作者）
- 实际结果：与预期结果一致（见 TESTCASES.md 第344-347行）
- 测试结论：功能正常，符合预期

#### TC-POST-010: 编辑文章 - 未登录用户
- 状态：通过
- 测试数据：未登录状态，文章ID `1`
- 实际结果：与预期结果一致（见 TESTCASES.md 第356-358行）
- 测试结论：功能正常，符合预期

#### TC-POST-011: 编辑文章 - 表单验证
- 状态：通过
- 测试数据：已登录用户 testuser（文章作者），已有文章一篇（ID=5），编辑时将标题留空
- 实际结果：标题留空时，浏览器显示“请填写此字段”提示，表单未提交
- 测试结论：表单必填校验生效（当前由浏览器/前端校验实现）

#### TC-POST-013: 删除文章 - 取消删除
- 状态：通过
- 测试数据：已登录用户 testuser（文章作者），已有文章一篇（ID=5），删除文章选择取消
- 实际结果：与预期结果一致（见 TESTCASES.md 第402-405行）
- 测试结论：功能正常，符合预期

#### TC-POST-014: 删除文章 - 非作者尝试删除
- 状态：通过
- 测试数据：用户A：testuser（文章作者），用户B：otheruser（非作者）
- 实际结果：与预期结果一致（见 TESTCASES.md 第417-420行）
- 测试结论：功能正常，符合预期
- 测试截图：` screenshots/TC-POST-014-PASS.png `

#### TC-POST-015: 删除文章 - 未登录用户
- 状态：通过
- 测试数据：URL=/blog/post/5/delete，Method=POST，Cookie=无
- 实际结果：与预期结果一致（见 TESTCASES.md 第429-431行）
- 测试结论：功能正常，符合预期

#### TC-POST-017: 文章列表 - 登录用户可见创建按钮
- 状态：通过
- 测试数据：用户名`otheruser`（已登录）
- 实际结果：与预期结果一致（见 TESTCASES.md 第453-455行）
- 测试结论：功能正常，符合预期

#### TC-POST-018: 文章列表 - 未登录用户
- 状态：通过
- 测试数据：未登录状态，文章ID`5`
- 实际结果：与预期结果一致（见 TESTCASES.md 第465-468行）
- 测试结论：功能正常，符合预期

#### TC-PERM-002: 文章编辑权限 - 直接访问URL
- 状态：通过
- 测试数据：用户A：testuser(文章作者) 和用户B:otheruser（非作者）
- 实际结果：与预期结果一致（见 TESTCASES.md 第494-496行）
- 测试结论：功能正常，符合预期
- 测试截图：` screenshots/TC-PERM-002-PASS.png `

#### TC-PERM-003: 文章删除权限 - 直接POST请求
- 状态：通过
- 测试数据：用户A：testuser(文章作者) 和用户B:otheruser（非作者）
- 实际结果：与预期结果一致（见 TESTCASES.md 第507-509行）
- 测试结论：功能正常，符合预期

#### TC-SEC-001: CSRF保护 - 创建文章
- 状态：失败（已修复，回归通过）
- 测试数据：
  - 账号：已登录用户（otheruser）
  - 请求：POST /blog/create
  - 表单数据：title=aaa，body=bbb
  - CSRF：未携带 csrf_token 参数（Cookie携带登录session）
- 实际结果：
  - 表单包含CSRF token（hidden字段）
  - 不包含token的请求未被拒绝（HTTP/1.1 200 OK，返回创建文章页面）
  - 不显示CSRF验证错误
- 测试截图：`screenshots/TC-SEC-001-FAIL.png`
- 测试结论：
  - 创建文章接口未对缺失CSRF token的POST请求进行拦截，CSRF保护未生效，不符合预期，需要完善CSRF验证机制。
- 回归结果（修复后）：
  - 缺失 csrf_token 的 POST /blog/create 请求被拒绝（HTTP 400），文章不会被创建

#### TC-SEC-002: CSRF保护 - 删除文章
- 状态：失败（已修复，回归通过）
- 测试数据：
  - 账号：已登录作者用户(testuser)
  - 文章ID：5
  - 请求：POST /blog/post/5/delete
  - CSRF：未携带 csrf_token
- 实际结果：
  - 删除请求未被拒绝（HTTP 302 重定向到 /）
  - 文章被成功删除（再次访问详情页显示不存在/404）
- 测试截图：`screenshots/TC-SEC-002-FAIL.png`
- 测试结论：
  - 删除文章接口未对缺失/无效 CSRF token 的请求进行拦截，CSRF 保护未生效，存在安全风险，不符合预期，需要修复。
- 回归结果（修复后）：
  - 缺失 csrf_token 的 POST /blog/post/5/delete 请求被拒绝（HTTP 400），文章不会被删除

#### TC-SEC-003: 密码安全 - 密码哈希存储
- 状态：通过
- 测试数据：
  - 数据库：instance/blog.db
  - 查询SQL：SELECT id, username, password_hash FROM user;
- 实际结果：与预期结果一致（见 TESTCASES.md 第551-554行）
- 测试结论：功能正常，符合预期
- 测试截图：` screenshots/TC-SEC-003-PASS.png `

#### TC-SEC-004: SQL注入防护 - 文章标题
- 状态：通过
- 测试数据：标题 `'; DROP TABLE posts; --`，内容 `test`
- 实际结果：
  - 文章可正常提交创建，系统无异常/无SQL报错
  - 注入字符串被当作普通标题保存（数据库中可查询到该标题记录）
  - post 表仍存在且可正常查询（未发生 DROP TABLE）
- 测试结论：
  - 系统未执行注入语句，SQL注入未生效，具备基本SQL注入防护能力，符合预期
- 测试截图：` \screenshots/TC-SEC-004-PASS.png `

#### TC-SEC-005: XSS防护 - 文章内容
- 状态：通过
- 测试数据：内容 `<script>alert('XSS')</script>`
- 实际结果：与预期结果一致（见 TESTCASES.md 第579-582行）
- 测试结论：功能正常，符合预期
- 测试截图：` \screenshots/TC-SEC-005-PASS.png `

#### TC-SEC-006: 会话管理 - 登出后无法访问
- 状态：通过
- 测试数据：无（登出后访问受保护URL：/blog/create）
- 实际结果：与预期结果一致（见 TESTCASES.md 第594-596行）
- 测试结论：功能正常，符合预期
- 测试截图：` \screenshots/TC-SEC-006-PASS.png `

#### TC-UX-003: 导航栏功能
- 状态：通过
- 测试数据：
  - 未登录状态：访问首页
  - 已登录账号：testuser（或 otheruser）
  - 验证链接：/auth/login、/auth/register、/blog/create、/auth/logout
  - 响应式测试：浏览器开发者工具切换移动端宽度（375px）
- 实际结果：与预期结果一致（见 TESTCASES.md 第637-641行）
- 测试结论：功能正常，符合预期

#### TC-UX-004: 删除确认对话框
- 状态：通过
- 测试数据：
  - 账号：已登录作者用户(testuser)
  - 文章ID：6
  - 操作：在文章详情页点击“删除”按钮
- 实际结果：与预期结果一致（见 TESTCASES.md 第652-655行）
- 测试结论：功能正常，符合预期

#### TC-COMPAT-001: 浏览器兼容性 - Chrome
- 状态：通过
- 测试数据：
  - 浏览器：Google Chrome（最新版）
  - 覆盖功能：注册/登录/登出、文章创建/查看/编辑/删除、权限控制、导航栏响应式折叠
- 实际结果：与预期结果一致（见 TESTCASES.md 第788-791行）
- 测试结论：兼容性良好，符合预期

---

## 测试轮次：3（P2用例）
日期：2025.12.27
测试员：宋传杰

### 执行摘要
- 总用例数：15
- 通过：14
- 失败：1
- 阻塞：0

### 详细记录

#### TC-AUTH-011: 用户登录 - 已登录用户访问登录页
- 状态：通过
- 测试数据：已登录用户（testuser）
- 实际结果：与预期结果一致（见 TESTCASES.md 第177-187行）
- 测试结论：功能正常，符合预期

#### TC-POST-016: 文章列表 - 空状态
- 状态：通过
- 测试数据：数据库无文章（清空 post 表或使用空数据库）
- 实际结果：与预期结果一致（见 TESTCASES.md 第434-446行）
- 测试结论：功能正常，符合预期

#### TC-UX-001: 表单验证提示 - 实时显示
- 状态：通过
- 测试数据：
  - 页面：/auth/register、/auth/login、/blog/create
  - 操作：提交空表单
- 实际结果：与预期结果一致（见 TESTCASES.md 第602-613行）
- 测试结论：功能正常，符合预期

#### TC-UX-002: Flash消息显示
- 状态：通过
- 测试数据：
  - 操作覆盖：注册/登录/创建文章等触发 flash 的操作
- 实际结果：Flash 成功/失败样式正确，消息可手动关闭；未实现自动消失（不影响基本使用）
- 测试结论： Flash消息显示功能正常，但建议优化：Flash自动消失

#### TC-UX-005: 表单预填充 - 编辑文章
- 状态：通过
- 测试数据：
  - 账号：testuser
  - 文章：ID=6
- 实际结果：与预期结果一致（见 TESTCASES.md 第659-668行）
- 测试结论：功能正常，符合预期

#### TC-UX-006: 页面跳转逻辑
- 状态：失败(已修复，回归通过)
- 测试数据：
  - 创建文章后跳转（/blog/create → /）
  - 编辑文章后跳转（/blog/post/<id>/edit → /blog/post/<id>）
  - 删除文章后跳转（/blog/post/<id>/delete → /）
  - 登录后 next 参数跳转（/auth/login?next=...）
- 实际结果：
  - 创建/编辑/删除后的跳转均正常
  - 未登录访问受保护页面（/blog/create）会跳转到 auth/login?next=%2Fblog%2Fpost%2F1%2Fedit
  - 登录成功后实际跳转到首页（/），未跳转回 next 指定的页面（/blog/create）
- 测试结论：
  - 登录后未按 next 参数返回原目标页面，页面跳转逻辑不完整，不符合预期，需要修复登录后的重定向逻辑（next 参数处理）。
- 回归结果（修复后）：
  - 未登录访问 `/blog/create` 跳转到登录页携带 next 参数；登录成功后按 next 返回 `/blog/create`

#### TC-UX-007: 文章列表点击区域
- 状态：通过
- 测试数据：首页存在至少一篇文章
- 实际结果：与预期结果一致（见 TESTCASES.md 第687-699行）
- 测试结论：功能正常，符合预期

#### TC-BOUNDARY-001: 文章标题边界值
- 状态：通过
- 测试数据：
  - 标题长度=1（如 "a"）
  - 标题长度=200（200个字符）
  - 标题长度=201（201个字符）
- 实际结果：
 - 1字符和200字符可以成功创建
 - 输入框到 200 字符后无法继续输入，无法构造 201 字符标题提交
- 测试结论：功能正常，符合预期

#### TC-BOUNDARY-002: 文章内容边界值
- 状态：通过
- 测试数据：
  - 内容仅空格（如 "   "）
  - 内容长度=1（如 "a"）
  - 超长内容（ 10000 字符）
- 实际结果：与预期结果一致（见 TESTCASES.md 第715-726行）
- 测试结论：功能正常，符合预期

#### TC-BOUNDARY-003: 用户名边界值
- 状态：通过
- 测试数据：
  - 用户名长度=4/64/3/65
- 实际结果：
  - 4字符与64字符用户名可正常注册
  - 3字符用户名提交时浏览器提示“请将此文本加长到4或更多”，表单无法提交
  - 用户名输入框最大长度限制为64，无法输入65字符（未直接验证后端对65字符的校验）
- 测试结论：
  - 用户名长度边界校验生效，符合预期（当前主要由前端 minlength/maxlength 限制实现）

#### TC-BOUNDARY-004: 密码边界值
- 状态：通过
- 测试数据：
  - 密码长度=6
  - 密码长度=5
- 实际结果：
 -6字符可以成功注册
 -5字符密码提交时浏览器提示“请将此文本加长到6字符或更多”，表单无法提交
- 测试结论：密码长度边界校验生效，符合预期（当前主要由前端 minlength/maxlength 限制实现）

#### TC-EXCEPTION-001: 数据库错误处理
- 状态：通过
- 测试数据：模拟数据库不可用（重命名 instance/blog.db）
- 实际结果：
 - 提示访问/blog/create需要登录
 - 登录提示“用户名或密码错误，请重试。”
 - 不暴露数据库内部错误信息
 - 应用不崩溃
- 测试结论：功能正常，符合预期

#### TC-EXCEPTION-002: 并发操作
- 状态：通过
- 测试数据：
  - 用户A：文章作者（testuser）
  - 用户B：非作者（otheruser）
  - 同一文章ID：6
- 实际结果：与预期结果一致（见 TESTCASES.md 第767-779行）
- 测试结论：功能正常，符合预期

#### TC-COMPAT-002: 浏览器兼容性 - Edge
- 状态：通过
- 测试数据：
  - 浏览器：Microsoft edge
  - 覆盖功能：注册/登录/登出、文章创建/查看/编辑/删除、权限控制、导航栏响应式折叠
- 实际结果：与预期结果一致（见 TESTCASES.md 第800-802行）
- 测试结论：兼容性良好，符合预期

#### TC-COMPAT-003: 响应式设计 - 移动端
- 状态：通过
- 测试数据：
  - 浏览器开发者工具移动端视图（如 375px）
  - 页面：/、/auth/login、/auth/register、/blog/create、/blog/post/<id>
- 实际结果：与预期结果一致（见 TESTCASES.md 第806-817行）
- 测试结论：功能正常，符合预期

---

## 测试覆盖率统计（手动）
> 说明：本统计为基于《手动测试记录》汇总的“用例执行覆盖率”（非代码覆盖率/非自动化覆盖率）。按轮次（P0/P1/P2）与总体维度统计“执行/通过/失败/阻塞”以及通过率。

### 按轮次统计
| 轮次 | 用例总数 | 通过 | 失败 | 阻塞 | 通过率 |
|---|---:|---:|---:|---:|---:|
| 轮次1（P0） | 9 | 9 | 0 | 0 | 100.00% |
| 轮次2（P1） | 32 | 30 | 2 | 0 | 93.75% |
| 轮次3（P2） | 15 | 14 | 1 | 0 | 93.33% |
| **合计** | **56** | **53** | **3** | **0** | **94.64%** |

### 失败用例清单（共3项）
- 轮次2：
  - TC-SEC-001（CSRF保护 - 创建文章）：失败
  - TC-SEC-002（CSRF保护 - 删除文章）：失败
- 轮次3：
  - TC-UX-006（页面跳转逻辑/next 参数）：失败

## 测试总结
- 本次共执行 56 条用例，通过 53 条，失败 3 条，整体通过率 94.64%，无阻塞项。
- 核心业务链路（注册/登录/登出、文章创建/查看/编辑/删除、权限控制）在 P0/P1/P2 覆盖下整体表现稳定。
- 主要风险集中在安全与跳转逻辑：
  - CSRF 防护在“创建文章/删除文章”场景未生效（TC-SEC-001、TC-SEC-002），存在明确安全风险，建议优先级 P0 修复，并补充相关回归用例。
  - 登录后对 next 参数的重定向未按预期生效（TC-UX-006），影响用户体验与受保护页面访问闭环，建议尽快修复并回归验证。
